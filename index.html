<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>笔记本</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="笔记本">
<meta property="og:url" content="http://xiaoyue26.github.io/index.html">
<meta property="og:site_name" content="笔记本">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="风梦七">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="笔记本" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  
<link rel="stylesheet" href="/css/style.css">

  

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://xiaoyue26.github.io"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">笔记本</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">风梦七</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2022-05/w-tinylfu缓存算法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/31/2022-05/w-tinylfu%E7%BC%93%E5%AD%98%E7%AE%97%E6%B3%95/" class="article-date">
  <time datetime="2022-05-31T03:36:23.000Z" itemprop="datePublished">2022-05-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>►<a class="article-category-link" href="/categories/java/%E6%80%A7%E8%83%BD/">性能</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/31/2022-05/w-tinylfu%E7%BC%93%E5%AD%98%E7%AE%97%E6%B3%95/">w-tinylfu缓存算法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="WHAT-w-tinylfu是什么？"><a href="#WHAT-w-tinylfu是什么？" class="headerlink" title="WHAT: w-tinylfu是什么？"></a>WHAT: w-tinylfu是什么？</h1><p><code>w-tinylfu</code> = window tiny LFU<br>实际是一种缓存置换算法，直译过来大概是带一个窗口的tiny版本的LFU实现；<br>主要用三段LRU，一个布隆过滤器、一个<code>cm-sketch</code>计数器，兼顾了LFU和LRU的优点。<br>大致思想上类似于别的分段lru算法（例如mysql中buffer pool的lru链表，5/8存young page,3/8存old page）。</p>
<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>学术界：<br>来自论文：<a href="https://arxiv.org/pdf/1512.00727.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1512.00727.pdf</a><br>工业界：<br>实现：java中的caffeine缓存就用的是w-tinylfu算法。</p>
<img src="/images/2022-05/caffeine.png" class="" width="800" height="1200" title="caffeine">
<p>当然这里caffeine的性能好除了w-tinylfu算法的贡献，还有其他很多优化比如结合了disruptor（RingBuffer）、时间轮；</p>
<h1 id="WHEN-什么时候使用w-tinylfu算法"><a href="#WHEN-什么时候使用w-tinylfu算法" class="headerlink" title="WHEN: 什么时候使用w-tinylfu算法"></a>WHEN: 什么时候使用w-tinylfu算法</h1><p>缓存置换算法也不是银弹，也需要匹配它适合的某些分布workload。<br>即使是匹配的分布的workload，实际参数也要和workload匹配才能达到最好性能。</p>
<p>w-tinylfu算法适合的工作负载的大概特征：</p>
<ol>
<li>静态的偏态分布;(分布规律不怎么变化)</li>
<li>有一定动态变化(不能变化得太快太剧烈)的分布、包括有一定突发流量的偏态分布，例如偶有突发流量的zipf分布。</li>
</ol>
<h2 id="比较合适的："><a href="#比较合适的：" class="headerlink" title="比较合适的："></a>比较合适的：</h2><p>benchmark中测试的workload比较合适的包括:<br>youtube、维基百科、数据库访问、windows文件系统、搜索引擎；</p>
<h2 id="不太合适的："><a href="#不太合适的：" class="headerlink" title="不太合适的："></a>不太合适的：</h2><p>OLTP中的磁盘访问: 轨迹实际是顺序访问的升序队列中散布一些随机访问，这对于w-tinylfu来说不太适配。</p>
<p>具体的调参涉及到算法内部细节，因此最后在调优章节再展开。</p>
<h1 id="HOW-w-tinylfu具体是怎么做的"><a href="#HOW-w-tinylfu具体是怎么做的" class="headerlink" title="HOW: w-tinylfu具体是怎么做的"></a>HOW: w-tinylfu具体是怎么做的</h1><h2 id="目标、要解决的问题"><a href="#目标、要解决的问题" class="headerlink" title="目标、要解决的问题"></a>目标、要解决的问题</h2><p>1。提高缓存命中率；<br>现有方案的缺点：<br><code>LFU</code>: 数据访问模式有变化时（例如有突发流量），LFU较迟钝，始终缓存早先访问多的数据；<br><code>LRU</code>: 不能记忆历史的访问规律，高频访问key并不一定能缓存到。<br>2。降低内存消耗；<br>现有方案的缺点：<br><code>LFU</code>: 需要给每个key维护频率信息（PLFU记录所有key的频率；WLFU则记录当前缓存中key的频率），需要巨大的内存消耗。</p>
<p>总之，w-tinylfu需要以较低的内存消耗达到高命中率。</p>
<h2 id="架构、解决方案"><a href="#架构、解决方案" class="headerlink" title="架构、解决方案"></a>架构、解决方案</h2><img src="/images/2022-05/w_tiny_lfu_1.png" class="" width="800" height="1200" title="w_tiny_lfu_1">
<p>如上图所示：<br>1。<code>LRU</code>: 最左边是一个普通的LRU窗口，默认占1%的空间，负责处理突发流量的情况；<br>2。<code>filter</code>: 第2个组件是一个布隆过滤器，作为看门人，负责阻挡长尾的低频访问、避免纳入计数器；<br>3。<code>Segmented LRU</code>: 第3个组件是分段LRU，分为两段:<br>(1)<code>protected</code>: 受保护区，占80%，存放访问次数&gt;1的数据;<br>(2)<code>probation</code>: 缓刑区域, 占20%，存放访问次数=1的数据;（淘汰备选）<br>按我理解，其实还应该有一个组件负责统计频次，但论文中没有相应的图。<br>这里按我理解直接补上：<br>4。<code>CM-Sketch</code>: 近似统计频次。这里类似于WLFU，只记录当前缓存中有出现的key的频率，使用<code>count min sketch</code>算法。<br>近似统计频次算法，因此有一定错误率，但也极大节省了内存。</p>
<h3 id="节省内存：CM-Sketch算法近似统计"><a href="#节省内存：CM-Sketch算法近似统计" class="headerlink" title="节省内存：CM-Sketch算法近似统计"></a>节省内存：CM-Sketch算法近似统计</h3><p><code>count min sketch</code>算法，类似于计数版本的布隆过滤器，把布隆过滤器原来标记是否存在的0\1改成能存更多值的计数器。<br>由于考虑到实际workload中常见的是长尾分布，因此计数器实际位数不多，默认只有4位，也就是默认大部分数据访问频次在15次以内。<br>CM-SKetch使用多个哈希函数(或者1个哈希函数和多个种子)和多个计数器来记录访问的次数。<br>实际读的时候取所有计数器里最小的一个，因此其他计数器的值其实就没什么用了。<br>而且由于哈希碰撞，有一定的概率频次的估计会偏大，（但是不会偏小）<br>因此实际每个key的统计频次增加的时候，可以只增大当前最小的计数器。</p>
<img src="/images/2022-05/cm_sketch.png" class="" width="400" height="600" title="cm_sketch">

<h4 id="调参"><a href="#调参" class="headerlink" title="调参"></a>调参</h4><p>假如处理的数据规模是n，希望估计值落在<code>[实际值， 实际值+ a*n]</code>范围的概率是<code>1-b</code>;<br>则:<br>1.计数器数量为: <code>e/a</code> 的上界;<br>2.哈希函数的数量为: <code>ln(1/b)</code> 的上界;</p>
<p>例如当n=10^6时，如果我们希望估计值落在<code>实际值, 实际值+ 2000</code>范围的概率是99%，<br>则:</p>
<ol>
<li>计数器数量为: e/0.002 的上界 = 1360;</li>
<li>哈希函数的数量为: ln(1/0.01) 的上界 = 5;<br>当计数器占4bit，则整个计数组件占空间 = 1360<em>5</em>4 bit= 约3.5KB。</li>
</ol>
<h3 id="动态访问模式（访问key的分布变化）：Freshness-Mechanism-保鲜机制"><a href="#动态访问模式（访问key的分布变化）：Freshness-Mechanism-保鲜机制" class="headerlink" title="动态访问模式（访问key的分布变化）：Freshness Mechanism(保鲜机制)"></a>动态访问模式（访问key的分布变化）：Freshness Mechanism(保鲜机制)</h3><p>统计新增key到CM-Sketch计数器的次数w，一旦w达到阈值W的大小时，进行reset操作。<br>reset操作实际有两方面:<br>(1)将所有计数器的值减半(可以通过简单的<code>&gt;&gt;</code>和<code>&amp;0x77</code>操作来实现);<br>// 副作用：可能除不尽，计数误差+1。<br>(2)将看门人的bloom filter清空。<br>// 副作用: 计数误差+1;</p>
<h3 id="节省内存、长尾分布优化：Doorkeeper-看门人-机制"><a href="#节省内存、长尾分布优化：Doorkeeper-看门人-机制" class="headerlink" title="节省内存、长尾分布优化：Doorkeeper(看门人)机制"></a>节省内存、长尾分布优化：Doorkeeper(看门人)机制</h3><p>解决的问题：长尾分布。现实时间的访问轨迹大多符合长尾效应的偏态分布，也就是大部分访问key只访问很少次数，比如1次。<br>如果这些流量也纳入近似统计用的CM-Sketch，就会极大扩大本来就有概率发生的哈希碰撞，从而影响性能。<br>如果要维持出错概率不上升，只能增大计数器的槽位（哈希表的格数），增加内存消耗。</p>
<p>因此这里的<code>DoorKeeper</code>机制，就是在近似统计组件前面增加一个防护存储、一个布隆过滤器。<br>在纳入<code>CM-Sketch</code>之前，首先要先检查一下在不在filter里面:<br>(1)如果有: 说明之前可能有访问过，通过，纳入计数器；<br>(1)如果没有: 说明之前没有访问过，拒绝写入计数器；但写入filter记录下来。// 下次如果再访问则能通过。</p>
<p>通过这种看门人机制，可以阻拦大部分只访问1次的key，避免将大量资源消耗在这些key上面。</p>
<h2 id="读写流程"><a href="#读写流程" class="headerlink" title="读写流程"></a>读写流程</h2><h3 id="读"><a href="#读" class="headerlink" title="读"></a>读</h3><p>从<code>lru</code>或者<code>segment lru</code>部分读取，然后增加计数器的值即可。</p>
<h3 id="写"><a href="#写" class="headerlink" title="写"></a>写</h3><img src="/images/2022-05/w_tiny_lfu_2.png" class="" width="800" height="1200" title="w_tiny_lfu_2">
<p>如上图所示，新item插入的时候，首先进入lru；<br>如何如果lru满了，淘汰者和分段lru的淘汰者pk，(根据近似计数器中的频次)。</p>
<img src="/images/2022-05/w_tiny_lfu_3.png" class="" width="800" height="1200" title="w_tiny_lfu_3">
<p>而在分段lru中，probation缓刑区中访问则升到protected区。(反之protected的淘汰者降级到probation)</p>
<h1 id="调优参数"><a href="#调优参数" class="headerlink" title="调优参数"></a>调优参数</h1><p>回顾各个组件:<br>1。<code>LRU</code>: 默认占1%的空间，负责处理突发流量的情况；<br>因此如果实际突发流量占不止1%的内存空间，可能需要调大这部分；（反之亦然）<br>2。<code>filter</code>: 布隆过滤器; 只拦了访问次数=1的，因此如果长尾是2次，则可能要调整这部分。<br>3。<code>Segmented LRU</code>:<br>(1)<code>protected</code>: 受保护区，占80%，存放访问次数&gt;1的数据;<br>(2)<code>probation</code>: 缓刑区域, 占20%，存放访问次数=1的数据;（淘汰备选）</p>
<p>4。<code>CM-Sketch</code>: 默认是4位计数器，最大15次。隐含假设是大部分访问&lt;15次，因此如果这个假设不成立，也要调整这部分。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>论文: <a href="https://arxiv.org/pdf/1512.00727.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1512.00727.pdf</a><br><a href="https://xuzhijvn.github.io/zh-cn/posts/cs/other/caffeine/" target="_blank" rel="noopener">https://xuzhijvn.github.io/zh-cn/posts/cs/other/caffeine/</a><br><a href="https://jishuin.proginn.com/p/763bfbd34443" target="_blank" rel="noopener">https://jishuin.proginn.com/p/763bfbd34443</a><br>cm-sketch算法: <a href="https://zhuanlan.zhihu.com/p/369981005" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/369981005</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://xiaoyue26.github.io/2022/05/31/2022-05/w-tinylfu%E7%BC%93%E5%AD%98%E7%AE%97%E6%B3%95/" data-id="cl3tudq4k00007damcj6v6fld" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bloomfilter/" rel="tag">bloomfilter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/caffeine/" rel="tag">caffeine</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cm-sketch/" rel="tag">cm-sketch</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/doorkeeper/" rel="tag">doorkeeper</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/lfu/" rel="tag">lfu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/lru/" rel="tag">lru</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tinylfu/" rel="tag">tinylfu</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-2022-03/G1调优-复杂业务治理小记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/03/25/2022-03/G1%E8%B0%83%E4%BC%98-%E5%A4%8D%E6%9D%82%E4%B8%9A%E5%8A%A1%E6%B2%BB%E7%90%86%E5%B0%8F%E8%AE%B0/" class="article-date">
  <time datetime="2022-03-25T10:18:48.000Z" itemprop="datePublished">2022-03-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>►<a class="article-category-link" href="/categories/java/jvm/">jvm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/03/25/2022-03/G1%E8%B0%83%E4%BC%98-%E5%A4%8D%E6%9D%82%E4%B8%9A%E5%8A%A1%E6%B2%BB%E7%90%86%E5%B0%8F%E8%AE%B0/">G1调优-复杂业务治理小记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>三板斧: </p>
<ol>
<li>Region size;</li>
<li>Profile出不合理的内存分配代码，优化或者迁移；</li>
<li>确实有比较高内存消耗的场景，提早收集；</li>
</ol>
<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>一般来说8~64GB的堆用G1垃圾收集器还是比较省心，只需要配置regionSize和停顿时间基本就不用管了。<br>相关参数: <code>-XX:G1HeapRegionSize=16M</code>, <code>-XX:MaxGCPauseMillis=200</code></p>
<p>不一般的情况也偶有发生，<br>工作中我们的一个老服务就遇到了停顿时间太长的问题。<br>这个老服务首先jdk版本较低只有8，<br>其次服务里有非常多不同类型的业务接口，承担了极为复杂的业务功能。<br>复杂度正比于 ～ 公司所有其他对外业务的功能*公司内大量对内业务的功能。</p>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>线上服务gc停顿时间达到3～5s，偶尔甚至达到10s.</p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="1。-收集信息"><a href="#1。-收集信息" class="headerlink" title="1。 收集信息"></a>1。 收集信息</h2><p>1。 通过<code>arthas</code>的<code>dashboard</code>或<code>jstat -gcutils</code>观察内存消耗特别快，gc日志里能看到时不时就<code>to-space</code>耗尽了。</p>
<p>2。 但是经过gc能够回收，说明没有太长时间的内存泄露，用jmap就很难找到对应的内容或者相关代码了。<br>// 同时jmap会卡住线上服务进入safepoint，停顿时间分钟级，然后上传、加载估计半小时起步，风险和成本太高，收益较难达到。</p>
<p>3。 预发环境没有问题，只有线上有，说明是用户请求触发的。</p>
<p>4。 gc日志里<code>source: concurrent humongous allocation</code>较多。</p>
<h2 id="2。-profile"><a href="#2。-profile" class="headerlink" title="2。 profile"></a>2。 profile</h2><p>如果jdk16的话，可以长期开着Profile（sample事件），但是这个老服务是jdk8，因此需要重新监控一下内存分配的事件：</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./async-profiler-2.7-linux-x64/profiler.sh -d 300 -f 5min.jfr -e alloc --alloc 10m &lt;pid&gt;</span><br></pre></td></tr></table></figure>
<p>首先记录下线上服务进程的jfr黑匣子，然后再输出一下<code>ObjectAllocationOutsideTLAB</code>事件并统计:</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 分配大对象次数最多: :</span></span><br><span class="line">jfr print --events jdk.ObjectAllocationOutsideTLAB 5min.jfr | grep allocationSize | awk -F'=' '&#123;print $2&#125;' | sort | uniq -c | sort -n</span><br><span class="line"><span class="meta">#</span><span class="bash"> 每次分配内存对象最大:</span></span><br><span class="line">jfr print --events jdk.ObjectAllocationOutsideTLAB 5min.jfr | grep allocationSize | awk -F'=' '&#123;print $2&#125;' | sort | uniq | sort -n</span><br></pre></td></tr></table></figure>
<p>找到对应的allocationSize以后，再grep出对应的堆栈:</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jfr print --events jdk.ObjectAllocationOutsideTLAB --stack-depth 16 5min.jfr | grep 19538928 -A 16 -B 3</span><br></pre></td></tr></table></figure>

<img src="/images/2022-03/grep_allocation_size.png" class="" width="800" height="1200" title="grep_allocation_size">

<p>至此就抓到疯狂分配内存的元凶代码了。</p>
<h2 id="3。改代码"><a href="#3。改代码" class="headerlink" title="3。改代码"></a>3。改代码</h2><p>这里因为是18MB * 上百次/每秒的内存申请，由于我们的regionSize是16MB，18MB是大对象（即使我们设置成最大32MB也还是会判定成大对象）<br>，而且内存碎片特别多（18MB要两个region才能放得下，也就是浪费16*2-18=14MB）。所以调gc参数的方式处理的话比较困难。</p>
<p>另一个方向是改代码，这里同事是在logger.debug的时候写了一个toJSON方法，虽然不会打印，但toJSON还是执行了。<br>将超大的对象数组toJSON，因此内存消耗巨大。<br>所以我们简单把日志改成sl4j的fluentApi，用suplier做toJSON就解决了问题。<br>重新上线，gc停顿时间消失。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.atDebug().log(() -&gt; toJSON(args));</span><br></pre></td></tr></table></figure>

<h1 id="回顾：WHY"><a href="#回顾：WHY" class="headerlink" title="回顾：WHY"></a>回顾：WHY</h1><h2 id="内存分配"><a href="#内存分配" class="headerlink" title="内存分配"></a>内存分配</h2><p>java创建对象的内存分配从好到坏有4种:<br>1.栈上分配: 如果是线程封闭的、足够小的对象，可以优化到栈上；<br>2.TLAB分配;<br>3.outside TLAB+eden分配;<br>4.H region分配;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://xiaoyue26.github.io/2022/03/25/2022-03/G1%E8%B0%83%E4%BC%98-%E5%A4%8D%E6%9D%82%E4%B8%9A%E5%8A%A1%E6%B2%BB%E7%90%86%E5%B0%8F%E8%AE%B0/" data-id="cl16b3low0000rgam67xy16st" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jvm/" rel="tag">jvm</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-2022-03/cms的gc触发条件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/03/16/2022-03/cms%E7%9A%84gc%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6/" class="article-date">
  <time datetime="2022-03-16T02:14:56.000Z" itemprop="datePublished">2022-03-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>►<a class="article-category-link" href="/categories/java/jvm/">jvm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/03/16/2022-03/cms%E7%9A%84gc%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6/">cms的gc触发条件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>cms的gc分为:</p>
<ul>
<li>前台收集</li>
<li>后台收集</li>
</ul>
<h2 id="前台收集"><a href="#前台收集" class="headerlink" title="前台收集"></a>前台收集</h2><p>触发条件：对象分配，空间不够；<br>算法： 标记清除（有碎片）</p>
<h2 id="后台收集"><a href="#后台收集" class="headerlink" title="后台收集"></a>后台收集</h2><p>定时任务扫描：(间隔=<code>CMSWaitDuration</code>=2s)</p>
<ol>
<li>有显式调用（<code>System.gc()</code>）;</li>
<li>预测要满了(根据历史统计数据，且未配置<code>UseCMSInitiatingOccupancyOnly</code>)；<br>（第一次的话50%老年代占用就开始gc了）</li>
<li>老年代占用&gt;阈值;</li>
<li><code>Young GC</code>可能失败或已失败;(没空间晋升了)</li>
<li><code>metaspace</code>扩容前，会进行一次cms gc；</li>
</ol>
<h2 id="压缩gc-full-gc"><a href="#压缩gc-full-gc" class="headerlink" title="压缩gc(full gc)"></a>压缩gc(full gc)</h2><p>触发条件: 前台收集之前，cms可能选择进行一次压缩gc(<code>full gc</code>)；(yong+old+metaspace)</p>
<p>触发条件:<br>(1)gc次数(前台收集+压缩<code>full gc</code>) &gt; <code>CMSFullGCsBeforeCompaction</code>；(默认0，每次都full gc)<br>(2)<code>System.gc()</code>，则触发；<br>(3)young gc可能失败或已经失败(晋升失败),则认为碎片太多，需要full gc压缩一下；<br>(4)配置了<code>CMSCompactWhenClearAllSoftRefs</code>, 则需要在内存不够时清理软引用，所以需要full gc;</p>
<p>减少这4种情况的触发，则可以减少full gc，提高性能。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://xiaoyue26.github.io/2022/03/16/2022-03/cms%E7%9A%84gc%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6/" data-id="cl0sxo6mi00005aamdhkf0q0o" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cms/" rel="tag">cms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gc/" rel="tag">gc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jvm/" rel="tag">jvm</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-2022-03/中断梳理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/03/14/2022-03/%E4%B8%AD%E6%96%AD%E6%A2%B3%E7%90%86/" class="article-date">
  <time datetime="2022-03-14T09:52:23.000Z" itemprop="datePublished">2022-03-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>►<a class="article-category-link" href="/categories/java/%E6%80%A7%E8%83%BD/">性能</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/03/14/2022-03/%E4%B8%AD%E6%96%AD%E6%A2%B3%E7%90%86/">java方法是否可中断梳理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="常见方法的中断相关汇总"><a href="#常见方法的中断相关汇总" class="headerlink" title="常见方法的中断相关汇总"></a>常见方法的中断相关汇总</h1><table>
<thead>
<tr>
<th>调用方法</th>
<th>是否可以中断</th>
<th>是否释放资源(锁)</th>
<th>是否释放cpu</th>
</tr>
</thead>
<tbody><tr>
<td><code>synchronized</code></td>
<td>不可中断</td>
<td>不释放</td>
<td>释放</td>
</tr>
<tr>
<td><code>lock</code></td>
<td>不可中断</td>
<td>不释放</td>
<td>释放</td>
</tr>
<tr>
<td><code>tryLock</code></td>
<td>可以中断</td>
<td>不释放</td>
<td>释放</td>
</tr>
<tr>
<td><code>lockInterruptibly</code></td>
<td>可以中断</td>
<td>不释放</td>
<td>释放</td>
</tr>
<tr>
<td><code>InterruptibleChannel</code></td>
<td>可以中断</td>
<td>不释放</td>
<td>释放</td>
</tr>
<tr>
<td><code>Thread.sleep</code></td>
<td>可以中断</td>
<td>不释放</td>
<td>释放</td>
</tr>
<tr>
<td><code>thread.join()</code></td>
<td>可以中断</td>
<td>释放thread对象的锁，其他不释放</td>
<td>释放</td>
</tr>
<tr>
<td><code>object.wait()</code></td>
<td>可以中断</td>
<td>释放</td>
<td>释放</td>
</tr>
<tr>
<td><code>condition.await()</code></td>
<td>可以中断</td>
<td>释放</td>
<td>释放</td>
</tr>
</tbody></table>
<p>其中<code>thread.join</code>底层其实是调用了thread对象的<code>wait</code>方法，之后一般被jvm的<code>notify</code>唤醒。<br>源码参考:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">(<span class="keyword">long</span> millis)</span> <span class="comment">// 方法上有synchronized</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> base = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">long</span> now = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (millis &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"timeout value is negative"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (millis == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (isAlive()) &#123;</span><br><span class="line">                wait(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (isAlive()) &#123;</span><br><span class="line">                <span class="keyword">long</span> delay = millis - now;</span><br><span class="line">                <span class="keyword">if</span> (delay &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                wait(delay); <span class="comment">// 实际调用的是wait,由notify唤醒</span></span><br><span class="line">                now = System.currentTimeMillis() - base;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><em>总结</em><br><code>lock</code>,<code>synchronized</code>容易死锁，因为不可中断。<br>尽量用表格下方的方法，性能会高些。</p>
<h1 id="内核态"><a href="#内核态" class="headerlink" title="内核态"></a>内核态</h1><h2 id="What-什么是内核态"><a href="#What-什么是内核态" class="headerlink" title="What: 什么是内核态"></a>What: 什么是内核态</h2><p>访问不属于自己的内存（用户空间、虚拟内存地址）时，<br>需要系统调用，进入cpu特权模式，因此需要切换到内核态；</p>
<p><em>切换到内核态时是否一定要释放cpu?</em><br>只是把寄存器保存到进程内核栈而已，进程cpu并不需要释放；</p>
<p><em>进程切换、线程切换是否需要切换内核态？</em><br>进程切换、线程切换：需要用到内核里的数据结构，因此需要进入内核态；</p>
<h1 id="操作系统线程库"><a href="#操作系统线程库" class="headerlink" title="操作系统线程库"></a>操作系统线程库</h1><p>1）POSIX Pthreads：可以作为用户或内核库提供，作为 POSIX 标准的扩展<br>2）Win32 线程：用于 Window 操作系统的内核级线程库</p>
<h2 id="java的线程库"><a href="#java的线程库" class="headerlink" title="java的线程库"></a>java的线程库</h2><p>Java 线程 API 通常采用宿主系统的线程库来实现。<br>也就是说在 Win 系统上，Java 线程 API 通常采用 Win API 来实现；<br>在 UNIX 类系统上，采用 Pthread 来实现。</p>
<p>具体到hotpot实现，则JVM线程跟内核轻量级进程一一对应。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://xiaoyue26.github.io/2022/03/14/2022-03/%E4%B8%AD%E6%96%AD%E6%A2%B3%E7%90%86/" data-id="cl0qj2eb80000lxama0cn89sj" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%AD%E6%96%AD/" rel="tag">中断</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E6%A0%B8%E6%80%81/" rel="tag">内核态</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-2022-03/mp4格式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/03/13/2022-03/mp4%E6%A0%BC%E5%BC%8F/" class="article-date">
  <time datetime="2022-03-13T09:45:02.000Z" itemprop="datePublished">2022-03-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91/">音视频</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/03/13/2022-03/mp4%E6%A0%BC%E5%BC%8F/">mp4格式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="WHAT-MP4"><a href="#WHAT-MP4" class="headerlink" title="WHAT: MP4"></a>WHAT: MP4</h1><p>一种封装格式(容器格式)，封装视频和音频、还有海报、字幕和元数据等；</p>
<p>常见的封装格式: MKV,AVI,MP4</p>
<p>MP4文件格式又被称为 MPEG-4 Part 14，出自 MPEG-4 标准第 14 部分。</p>
<h1 id="MP4格式"><a href="#MP4格式" class="headerlink" title="MP4格式"></a>MP4格式</h1><p>协议分为两阶段:<br>(1)<code>MPEG-4 Part 12</code>: 定义ISO基础媒体文件格式，存储基于时间的媒体内容；<br>(2)<code>MPEG-4 Part 14</code>: 在<code>MPEG-4 Part 12</code>基础上拓展，实际定义了MP4；<br>实际格式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    Box</span><br><span class="line">    ,Box:[Box,Box:[Box]]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>多个box组成，box可嵌套；</p>
<h2 id="Box"><a href="#Box" class="headerlink" title="Box"></a>Box</h2><p>不同的Box类型:<br>(1)<code>ftyp</code>: <code>File Type Box</code>; 描述MP4规范与版本；最好用什么版本来解析、兼容哪些版本的解析；<br>(2)<code>moov</code>: <code>Movie Box</code>; 媒体的<code>metadata</code>信息；1个；<br>    next_track_ID: 下一个轨道的id;(如果要新增)<br>    volume: 播放音量;<br>单轨属性:<br>    layer: 视频轨道的叠加顺序，数字越小越靠近观看者;<br>    alternate_group：track的分组ID，同个分组里的track，只能有一个track处于播放状态;<br>    width、height：视频的宽高<br>(3)<code>mdat</code>: Media Data Box；实际媒体数据；多个；<br>(4)…其他box类型；</p>
<h3 id="moov"><a href="#moov" class="headerlink" title="moov"></a>moov</h3><p><code>ffmpeg</code>默认情况下生成<code>moov</code>是在<code>mdat</code>写完成之后再写入，所以moov是在mdat的后面，使用faststart参数可以将moov移到mdat前面。<br>(moov在前面的话，首帧渲染速度会更快一点)</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i out.flv -c copy -movflags faststart out2.mp4</span><br></pre></td></tr></table></figure>

<h3 id="媒体数据结构划分"><a href="#媒体数据结构划分" class="headerlink" title="媒体数据结构划分"></a>媒体数据结构划分</h3><p>MP4媒体数据 -&gt; <code>chunk</code> -&gt; <code>sample</code> -&gt; 帧</p>
<h5 id="H264编码中的帧"><a href="#H264编码中的帧" class="headerlink" title="H264编码中的帧:"></a>H264编码中的帧:</h5><p>I帧: 关键帧；存的是完整的JPEG数据；<br>P帧: 前向预测编码帧；存的是与之前帧的差别；（参考别的帧）<br>B帧: 双向预测内插编码帧；双向差别，存的是和前帧、后帧的差别；（所以压缩率比P帧高，cpu占用高）</p>
<p>对于B帧，视频帧的解码顺序和渲染顺序不一致。（先解前后，才解中间；而渲染是顺序来的）</p>
<p>// H.265是一种视频压缩标准，仅需H.264的一半带宽即可播放相同质量的视频。</p>
<h5 id="H264流格式"><a href="#H264流格式" class="headerlink" title="H264流格式"></a>H264流格式</h5><p>1。<code>Annex-B</code><br>用<code>0x00000001</code>分割；<br>2。<code>RTP</code><br>长度+数据的格式；</p>
<h1 id="fmp4"><a href="#fmp4" class="headerlink" title="fmp4"></a>fmp4</h1><p>mp4: 点播<br>fmp4: 直播</p>
<p>时长: mp4固定,fmp4不固定（边生成边播）；<br>元数据: <code>mp4</code>-&gt;<code>moov box</code>;<br>       <code>fmp4</code>-&gt;<code>moof box</code>,和<code>mdat</code>通常结对出现；（流式）</p>
<h1 id="mp4相关工具"><a href="#mp4相关工具" class="headerlink" title="mp4相关工具"></a>mp4相关工具</h1><p>在线解析mp4的工具: <a href="https://gpac.github.io/mp4box.js/test/filereader.html" target="_blank" rel="noopener">https://gpac.github.io/mp4box.js/test/filereader.html</a><br>mp4dump、mp4edit、mp4encrypt等工具: <a href="http://www.bento4.com/" target="_blank" rel="noopener">http://www.bento4.com/</a><br><a href="https://github.com/gpac/gpac/wiki/MP4Box" target="_blank" rel="noopener">https://github.com/gpac/gpac/wiki/MP4Box</a><br>gpac：开源的多媒体工具包，包括用于MP4打包的mp4box等。<a href="https://github.com/gpac/gpac" target="_blank" rel="noopener">https://github.com/gpac/gpac</a><br>mp4v2：提供了API来创建和修改mp4文件。<a href="https://code.google.com/archive/p/mp4v2/" target="_blank" rel="noopener">https://code.google.com/archive/p/mp4v2/</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://segmentfault.com/a/1190000039270533" target="_blank" rel="noopener">https://segmentfault.com/a/1190000039270533</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://xiaoyue26.github.io/2022/03/13/2022-03/mp4%E6%A0%BC%E5%BC%8F/" data-id="cl0p3ck6y00006xjk2nw2cuhy" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/h264/" rel="tag">h264</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mp4/" rel="tag">mp4</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%82%B9%E6%92%AD/" rel="tag">点播</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%9B%B4%E6%92%AD/" rel="tag">直播</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-2022-03/ss命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/03/13/2022-03/ss%E5%91%BD%E4%BB%A4/" class="article-date">
  <time datetime="2022-03-13T02:02:13.000Z" itemprop="datePublished">2022-03-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/http/">http</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/03/13/2022-03/ss%E5%91%BD%E4%BB%A4/">ss命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="ss命令"><a href="#ss命令" class="headerlink" title="ss命令"></a>ss命令</h1><p><code>Socket Statistics</code><br>权威参考: <a href="https://man7.org/linux/man-pages/man8/ss.8.html" target="_blank" rel="noopener">https://man7.org/linux/man-pages/man8/ss.8.html</a></p>
<h2 id="查看tcp连接的统计信息"><a href="#查看tcp连接的统计信息" class="headerlink" title="查看tcp连接的统计信息:"></a>查看tcp连接的统计信息:</h2><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -t | head</span><br></pre></td></tr></table></figure>
<p>可以看到tcp连接的状态、收发情况、双方地址:</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">State      Recv-Q Send-Q Local Address:Port                 Peer Address:Port</span><br><span class="line">CLOSE-WAIT 1      0      10.28.234.170:64540                10.36.41.26:14326</span><br></pre></td></tr></table></figure>

<h2 id="Sockets摘要信息"><a href="#Sockets摘要信息" class="headerlink" title="Sockets摘要信息:"></a>Sockets摘要信息:</h2><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -s</span><br></pre></td></tr></table></figure>

<h2 id="查看已建立的http"><a href="#查看已建立的http" class="headerlink" title="查看已建立的http"></a>查看已建立的http</h2><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -o state established '( dport = :http or sport = :http )'</span><br></pre></td></tr></table></figure>

<h3 id="查看监听的端口"><a href="#查看监听的端口" class="headerlink" title="查看监听的端口"></a>查看监听的端口</h3><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -l</span><br></pre></td></tr></table></figure>

<h3 id="查看进程占用的端口"><a href="#查看进程占用的端口" class="headerlink" title="查看进程占用的端口"></a>查看进程占用的端口</h3><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -tnlp  | grep pid=97</span><br></pre></td></tr></table></figure>

<h3 id="状态过滤"><a href="#状态过滤" class="headerlink" title="状态过滤"></a>状态过滤</h3><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ss -4 state time-wait # 仅显示ipv4</span><br><span class="line">ss -6 # 仅显示ipv6</span><br></pre></td></tr></table></figure>
<p>状态的枚举可以通过 <code>ss -h</code>查看帮助来获取。</p>
<h3 id="查看内存占用"><a href="#查看内存占用" class="headerlink" title="查看内存占用"></a>查看内存占用</h3><p>用<code>ss -m</code>即可，具体输出的格式的定义如下：</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">skmem:(r&lt;rmem_alloc&gt;,rb&lt;rcv_buf&gt;,t&lt;wmem_alloc&gt;,tb&lt;snd_buf&gt;,</span><br><span class="line">                            f&lt;fwd_alloc&gt;,w&lt;wmem_queued&gt;,o&lt;opt_mem&gt;,</span><br><span class="line">                            bl&lt;back_log&gt;,d&lt;sock_drop&gt;)</span><br><span class="line"></span><br><span class="line">      &lt;rmem_alloc&gt;</span><br><span class="line">            the memory allocated for receiving packet</span><br><span class="line"></span><br><span class="line">      &lt;rcv_buf&gt;</span><br><span class="line">             the total memory can be allocated for receiving</span><br><span class="line">             packet</span><br><span class="line"></span><br><span class="line">      &lt;wmem_alloc&gt;</span><br><span class="line">             the memory used for sending packet (which has been</span><br><span class="line">             sent to layer 3)</span><br><span class="line"></span><br><span class="line">      &lt;snd_buf&gt;</span><br><span class="line">             the total memory can be allocated for sending</span><br><span class="line">             packet</span><br><span class="line"></span><br><span class="line">      &lt;fwd_alloc&gt;</span><br><span class="line">             the memory allocated by the socket as cache, but</span><br><span class="line">             not used for receiving/sending packet yet. If need</span><br><span class="line">             memory to send/receive packet, the memory in this</span><br><span class="line">             cache will be used before allocate additional</span><br><span class="line">             memory.</span><br><span class="line"></span><br><span class="line">      &lt;wmem_queued&gt;</span><br><span class="line">             The memory allocated for sending packet (which has</span><br><span class="line">             not been sent to layer 3)</span><br><span class="line"></span><br><span class="line">      &lt;ropt_mem&gt;</span><br><span class="line">             The memory used for storing socket option, e.g.,</span><br><span class="line">             the key for TCP MD5 signature</span><br><span class="line"></span><br><span class="line">      &lt;back_log&gt;</span><br><span class="line">             The memory used for the sk backlog queue. On a</span><br><span class="line">             process context, if the process is receiving</span><br><span class="line">             packet, and a new packet is received, it will be</span><br><span class="line">             put into the sk backlog queue, so it can be</span><br><span class="line">             received by the process immediately</span><br><span class="line"></span><br><span class="line">      &lt;sock_drop&gt;</span><br><span class="line">             the number of packets dropped before they are de-</span><br><span class="line">             multiplexed into the socket</span><br></pre></td></tr></table></figure>











      
    </div>
    <footer class="article-footer">
      <a data-url="http://xiaoyue26.github.io/2022/03/13/2022-03/ss%E5%91%BD%E4%BB%A4/" data-id="cl0omuqlp0001i2jk6uos50i6" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ss/" rel="tag">ss</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tcp/" rel="tag">tcp</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-2022-03/UDP批处理优化-GSO-GRO" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/03/13/2022-03/UDP%E6%89%B9%E5%A4%84%E7%90%86%E4%BC%98%E5%8C%96-GSO-GRO/" class="article-date">
  <time datetime="2022-03-13T01:59:14.000Z" itemprop="datePublished">2022-03-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/http/">http</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/03/13/2022-03/UDP%E6%89%B9%E5%A4%84%E7%90%86%E4%BC%98%E5%8C%96-GSO-GRO/">UDP批处理优化-GSO/GRO</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="GSO和GRO"><a href="#GSO和GRO" class="headerlink" title="GSO和GRO"></a>GSO和GRO</h1><p>GSO: <code>Generic Segmentation Offload</code><br>发送端；推迟发送端网络包分片，提高大包发送性能；<br>GRO: <code>Generic Receive Offload</code><br>接受端；提早合并到达网卡的小包；提高接受性能；</p>
<h2 id="GSO原理"><a href="#GSO原理" class="headerlink" title="GSO原理"></a>GSO原理</h2><p>before:<br>刚开始就分片，每个小分片参与后续的IP层、链路层、网卡驱动的系统调用；<br>after:<br>在网卡发送前再分片，减少系统调用。<br>// 1。 网卡支持：由网卡分片；<br>// 2。 网卡不支持：发送到网卡前一刻，内核做分片；</p>
<h1 id="GRO"><a href="#GRO" class="headerlink" title="GRO"></a>GRO</h1><p>GRO类似于GSO，都是在离网卡最近的地方做分片、合并之类的事情。（批处理）</p>
<h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p>cpu消耗：降低<br>网络吞吐优化：25%<br>系统调用次数降低：97%<br>系统耗时降低：90%</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://xiaoyue26.github.io/2022/03/13/2022-03/UDP%E6%89%B9%E5%A4%84%E7%90%86%E4%BC%98%E5%8C%96-GSO-GRO/" data-id="cl0omuqlj0000i2jkdvgbebwf" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gpo/" rel="tag">gpo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gso/" rel="tag">gso</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/udp/" rel="tag">udp</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-2022-02/为什么先hash后加密的方法容易遭遇padding攻击" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/24/2022-02/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%85%88hash%E5%90%8E%E5%8A%A0%E5%AF%86%E7%9A%84%E6%96%B9%E6%B3%95%E5%AE%B9%E6%98%93%E9%81%AD%E9%81%87padding%E6%94%BB%E5%87%BB/" class="article-date">
  <time datetime="2022-02-24T12:35:13.000Z" itemprop="datePublished">2022-02-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/http/">http</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/24/2022-02/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%85%88hash%E5%90%8E%E5%8A%A0%E5%AF%86%E7%9A%84%E6%96%B9%E6%B3%95%E5%AE%B9%E6%98%93%E9%81%AD%E9%81%87padding%E6%94%BB%E5%87%BB/">为什么先hash后加密的方法容易遭遇padding攻击</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="tls1-2实际加密方式"><a href="#tls1-2实际加密方式" class="headerlink" title="tls1.2实际加密方式"></a>tls1.2实际加密方式</h1><p>实际上加密算法是需要padding的，最早的padding方法是:<br><code>AES(text+MAC(text)+padding)</code><br>后来因为这种方式容易遭遇padding攻击，因此tls1.3采用了更安全的padding方法:<br>先<code>E=AES(text+padding)</code><br>然后： <code>E+MAC(E)</code></p>
<blockquote>
<p>padding攻击，通过反复修改部分内容、并触发解密过程，从而探测猜测加密算法的密钥；</p>
</blockquote>
<h1 id="Why"><a href="#Why" class="headerlink" title="Why"></a>Why</h1><p><code>padding oracle attack</code>:<br><a href="https://zh.wikipedia.org/wiki/%E5%AF%86%E6%96%87%E5%A1%AB%E5%A1%9E%E6%94%BB%E5%87%BB" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/%E5%AF%86%E6%96%87%E5%A1%AB%E5%A1%9E%E6%94%BB%E5%87%BB</a><br>从攻击方式可以看出，攻击者主要是以<br>1。修改最后1个字节；<br>2。触发解密，根据服务器返回（可能是耗时差异，也可能是返回错误），判断填充是否正确；<br>这种模式进行攻击。<br>所以如果在第2步，减少触发解密步骤的频率，则可以提供攻击难度。</p>
<p>回顾加密传输的两种处理步骤:<br>(1)hash-&gt;padding-&gt;加密;<br>(2)padding-&gt;加密-&gt;hash;</p>
<p>对应的解密步骤:<br>(1)解密-&gt;去掉padding-&gt;检查hash;<br>(2)检查hash-&gt;解密-&gt;去掉padding;</p>
<p>第1种方案：第一步就触发解密，容易被攻击；<br>第2种方案: 如果hash检查失败，就不会往后走解密逻辑了，因此攻击的难度提高了 。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://xiaoyue26.github.io/2022/02/24/2022-02/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%85%88hash%E5%90%8E%E5%8A%A0%E5%AF%86%E7%9A%84%E6%96%B9%E6%B3%95%E5%AE%B9%E6%98%93%E9%81%AD%E9%81%87padding%E6%94%BB%E5%87%BB/" data-id="cl00qhivt0000d2amdeia72dj" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AES/" rel="tag">AES</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HMAC/" rel="tag">HMAC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RSA/" rel="tag">RSA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSL/" rel="tag">SSL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TLS/" rel="tag">TLS</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-2022-02/keepalive" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/24/2022-02/keepalive/" class="article-date">
  <time datetime="2022-02-24T11:18:55.000Z" itemprop="datePublished">2022-02-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/http/">http</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/24/2022-02/keepalive/">http和tcp层面的keepAlive机制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="What-keepAlive机制是什么"><a href="#What-keepAlive机制是什么" class="headerlink" title="What: keepAlive机制是什么"></a>What: keepAlive机制是什么</h1><h2 id="HTTP层面"><a href="#HTTP层面" class="headerlink" title="HTTP层面"></a>HTTP层面</h2><p>http1.0是短连接，每次http请求都建立tcp连接然后断开；（3次握手4次挥手）<br>http1.1为了优化性能，推出keepAlive机制，同域名的多个http请求可以复用同一个tcp连接，也就是让tcp连接不每次断开，keepAlive。<br>对于http协议来说，就是在header里标示这种需求: <code>Connection: Keep-Alive</code></p>
<p>HTTP层面实际做的事情: header里标示keepAlive，然后通信双方不主动关闭tcp连接。<br>// http没有发送多余的保活、探活报文；</p>
<h2 id="TCP层面"><a href="#TCP层面" class="headerlink" title="TCP层面"></a>TCP层面</h2><blockquote>
<p>背景<br>TCP层面本来没必要做keepAlive，毕竟一个连接没有被关闭默认就是alive的。<br>但因为实际使用的时候，空闲的tcp连接会被 防火墙、负载均衡、代理软件 等中间节点掐断，<br>而且一般它们掐断空闲tcp连接的时候并不会向客户端发送任何报文提醒，因此客户端是无感知的。<br>这种情况可能产生 <code>Broken Pipe</code>错误。<br>为了避免这种情况，windows和linux内核在实现tcp的时候，加上了keepAlive机制。</p>
</blockquote>
<p>TCP层面的keepAlive实际做的事情: 发送keepAlive报文，返回对端的存活性；<br>两个作用：</p>
<ol>
<li>保活: 发送心跳报文，防止tcp连接被识别为空闲连接; // 防止被别人掐断；</li>
<li>探活: 探测对方的存活性，如果对方真的不在了，也不能浪费资源维持连接； // 主动自己断开；</li>
</ol>
<p>本质上就是：要断开连接的话，还是自己来吧，不让别人代劳了，不然别人掐了也不告诉我，凭空增加了我的异常；</p>
<h1 id="How-如何配置tcp层面的keepAlive"><a href="#How-如何配置tcp层面的keepAlive" class="headerlink" title="How: 如何配置tcp层面的keepAlive"></a>How: 如何配置tcp层面的keepAlive</h1><h2 id="保活-keepAlive间隔配置"><a href="#保活-keepAlive间隔配置" class="headerlink" title="保活: keepAlive间隔配置"></a>保活: keepAlive间隔配置</h2><p>linux内核tcp的keepAlive报文间隔默认是2小时； (<code>net.ipv4.tcp_keepalive_time</code>)<br>实际应该参考常见的”掐断连接凶手”的空闲连接配置，设置短一些。<br>比如：<br>F5: 空闲5分钟掐断；<br>GoogleCloud防火墙：空闲10分钟掐断；</p>
<p>所以可以考虑配置成5分钟keepAlive一次</p>
<h2 id="探活-主动断开相关的配置："><a href="#探活-主动断开相关的配置：" class="headerlink" title="探活: 主动断开相关的配置："></a>探活: 主动断开相关的配置：</h2><p><code>net.ipv4.tcp_keepalive_intvl</code>: 对端不正常的话，多久重试1次； 比如75秒；<br><code>net.ipv4.tcpkeepaliveprobes</code>: 最多重试几次以后断开； 比如9次以后主动断开；</p>
<h2 id="Http层面KeepAlive配置"><a href="#Http层面KeepAlive配置" class="headerlink" title="Http层面KeepAlive配置"></a>Http层面KeepAlive配置</h2><p>HTTP的头部：<br>1。 End-to-end头部：头部会被中间的代理原样转发；如Host等大部分Header；<br>2。 Hop-by-hop头部：只到下一跳节点；如KeepAlive头部；<br>因此要考虑Http请求链路上每一跳(比如Nginx)的KeepAlive配置，才能达到整个http请求涉及到的tcp连接都不自动断开。</p>
<h1 id="HTTP层面的keepAlive和tcp层面的keepAlive关系"><a href="#HTTP层面的keepAlive和tcp层面的keepAlive关系" class="headerlink" title="HTTP层面的keepAlive和tcp层面的keepAlive关系"></a>HTTP层面的keepAlive和tcp层面的keepAlive关系</h1><p>如果没有tcp层面的keepAlive，http层面希望的连接不断开，可能无法实现；<br>可能被中间的节点（比如防火墙、负载均衡、NAT代理）掐断。</p>
<p>如果tcp层面的keepAlive配置正确，http层面的keepAlive才能正常完成。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://support.f5.com/csp/article/K13004262" target="_blank" rel="noopener">https://support.f5.com/csp/article/K13004262</a><br><a href="https://cloud.tencent.com/developer/news/696654" target="_blank" rel="noopener">https://cloud.tencent.com/developer/news/696654</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://xiaoyue26.github.io/2022/02/24/2022-02/keepalive/" data-id="cl00eue9s00009nam7rs7a3vh" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/http/" rel="tag">http</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/keepalive/" rel="tag">keepalive</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tcp/" rel="tag">tcp</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-2022-02/拥塞算法bbr" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/18/2022-02/%E6%8B%A5%E5%A1%9E%E7%AE%97%E6%B3%95bbr/" class="article-date">
  <time datetime="2022-02-18T11:01:21.000Z" itemprop="datePublished">2022-02-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/http/">http</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/18/2022-02/%E6%8B%A5%E5%A1%9E%E7%AE%97%E6%B3%95bbr/">quic中的拥塞算法bbr</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="BBR"><a href="#BBR" class="headerlink" title="BBR"></a>BBR</h1><p>BBR = <code>Bottleneck Bandwidth and Round-trip time</code> </p>
<h1 id="拥塞控制算法"><a href="#拥塞控制算法" class="headerlink" title="拥塞控制算法"></a>拥塞控制算法</h1><p>tcp默认使用cubic算法做拥塞控制;<br>谷歌的quic开发了新的拥塞控制算法，吞吐量更大，更能利用带宽开发了新的拥塞控制算法<code>bbr</code>,<code>bbr_v2</code>;</p>
<h1 id="CUBIC-vs-BBR"><a href="#CUBIC-vs-BBR" class="headerlink" title="CUBIC vs BBR"></a>CUBIC vs BBR</h1><p>cubic vs bbr:</p>
<img src="/images/2022-02/cubic_vs_bbr.png" class="" width="400" height="600" title="cubic_vs_bbr">
<p>可以看到tcp默认的cubic拥塞控制算法频繁上下调整滑动窗口大小，锯齿状；<br>而bbr倾向于平稳发送，在实际带宽比较平稳的场景下，吞吐量更大。（图中折线下方的面积更大）</p>
<p>原来tcp为什么没有解决这个问题：<br>(1)tcp在linux内核里，升级太困难了。<br>(2)tcp的一些约束导致rtt算不准。比如ack delay、重传包的seq number不变。</p>
<blockquote>
<p>cubic: 基于丢包；锯齿形吞吐；事件驱动； tcp的重传包seqId不变，rtt算不准；<br>BBR: 基于延迟； 有平滑区间；根据rtt建立对带宽（窗口大小）的模型，再加上定时器；<br>quic的重传包，seqId增加，rtt算得准。区分了具体的重传类型。<br>需要注意：tcp的ack delay时间影响rtt计算；(默认40ms)</p>
</blockquote>
<p>BBR的思想：<br>当rtt开始增长的时候，就达到了最大带宽。</p>
<p>cubic：把缓存塞满一直到丢包；<br>对丢包率的容忍非常低，即使只有极少的丢包，吞吐量也会急剧下降。</p>
<blockquote>
<p>缓冲膨胀<br>指的网络设备或者系统不必要地设计了过大的缓冲区。<br>当网络链路拥塞时，就会发生缓冲膨胀，从而导致数据包在这些超大缓冲区中长时间排队。<br>在先进先出队列系统中，过大的缓冲区会导致更长的队列和更高的延迟，并且不会提高网络吞吐量。<br>由于BBR并不会试图填满缓冲区，所以在避免缓冲区膨胀方面往往会有更好的表现。</p>
</blockquote>
<p>弱网环境,引入1.5%的丢包：<br>cubic：吞吐量下降99.7%<br>bbr: 吞吐量下降45%</p>
<h1 id="BBR的缺点"><a href="#BBR的缺点" class="headerlink" title="BBR的缺点"></a>BBR的缺点</h1><p>1。wifi环境网速变慢；<br>2。网络公平性下降: 挤占cubic算法带宽；<br>3。重传率会更高；<br>4。bbr对于rrt的测量是包级别的，可能容易受波动影响，可以考虑统计学上进行优化；</p>
<p>bbr的平稳发送时期本质上假设网络环境有一段时间是平稳的，因此比cubic抖动少，大部分情况下实际情况确实如此。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://aws.amazon.com/cn/blogs/china/talking-about-network-optimization-from-the-flow-control-algorithm/" target="_blank" rel="noopener">https://aws.amazon.com/cn/blogs/china/talking-about-network-optimization-from-the-flow-control-algorithm/</a><br>bbr思想：<a href="https://blog.csdn.net/dog250/article/details/52962727" target="_blank" rel="noopener">https://blog.csdn.net/dog250/article/details/52962727</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://xiaoyue26.github.io/2022/02/18/2022-02/%E6%8B%A5%E5%A1%9E%E7%AE%97%E6%B3%95bbr/" data-id="ckzsbgao00000qqam1le61y3c" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bbr/" rel="tag">bbr</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cubic/" rel="tag">cubic</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/http/" rel="tag">http</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/quic/" rel="tag">quic</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/" rel="tag">spring</a></li></ul>

    </footer>
  </div>
  
</article>
 


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/2/">下一页&amp;raquo;</a>
  </nav>
</section>
           
    <aside id="sidebar">
  
    
  <div class="widget-wrap">
     
        <h3 class="follow-title ">Follow me</h3>
     
    <div class="widget follow">
      
              <a class="github" aria-hidden="true" href="https://github.com/xiaoyue26" target="_blank" title="Github"></a>
      
      
            <a class="weibo" aria-hidden="true"  href="http://weibo.com/3004306764" target="_blank" title="微博"></a>
      
      
      
            <a class="email" aria-hidden="true"  href="mailto:296671657@qq.com" target="_blank" title="邮箱"></a>
      
    </div>
  </div>


  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title categories">分类</h3>
    <div class="widget" id="categories">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/clickhouse/">clickhouse</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/es/">es</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gradle/">gradle</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><span class="category-list-count">15</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hbase/">hbase</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hive/">hive</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/pig/">pig</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/sqoop/">sqoop</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/%E8%BF%90%E7%BB%B4/">运维</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">83</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/Netty/">Netty</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/jvm/">jvm</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/">spring</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/%E5%B9%B6%E5%8F%91/">并发</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/%E6%80%A7%E8%83%BD/">性能</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/orm/">orm</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/rtc/">rtc</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/rust/">rust</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spark/">spark</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/spark/streaming/">streaming</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/tcp/">tcp</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E5%BF%97/">日志</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">消息队列</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/disruptor/">disruptor</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/kafka/">kafka</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/rabbitmq/">rabbitmq</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BA%E6%96%87/">论文</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%85%8D%E7%BD%AE/">配置</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91/">音视频</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/">项目管理</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title tagcloud">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/2-3%E6%A0%91/" style="font-size: 14px; color: #00f">2-3树</a> <a href="/tags/AES/" style="font-size: 14.85px; color: #120afe">AES</a> <a href="/tags/DDD/" style="font-size: 14.85px; color: #120afe">DDD</a> <a href="/tags/HMAC/" style="font-size: 14.85px; color: #120afe">HMAC</a> <a href="/tags/HTTP/" style="font-size: 14.85px; color: #120afe">HTTP</a> <a href="/tags/JMX/" style="font-size: 14px; color: #00f">JMX</a> <a href="/tags/JNI/" style="font-size: 16.54px; color: #371efb">JNI</a> <a href="/tags/NIO/" style="font-size: 14px; color: #00f">NIO</a> <a href="/tags/Netty/" style="font-size: 21.62px; color: #a55af3">Netty</a> <a href="/tags/RSA/" style="font-size: 14.85px; color: #120afe">RSA</a> <a href="/tags/RTP/" style="font-size: 14px; color: #00f">RTP</a> <a href="/tags/SIMD/" style="font-size: 14px; color: #00f">SIMD</a> <a href="/tags/SSL/" style="font-size: 14.85px; color: #120afe">SSL</a> <a href="/tags/TLS/" style="font-size: 14.85px; color: #120afe">TLS</a> <a href="/tags/arthas/" style="font-size: 14px; color: #00f">arthas</a> <a href="/tags/awk/" style="font-size: 14px; color: #00f">awk</a> <a href="/tags/bbr/" style="font-size: 14px; color: #00f">bbr</a> <a href="/tags/bloomfilter/" style="font-size: 14px; color: #00f">bloomfilter</a> <a href="/tags/caffeine/" style="font-size: 14px; color: #00f">caffeine</a> <a href="/tags/clickhouse/" style="font-size: 14.85px; color: #120afe">clickhouse</a> <a href="/tags/cm-sketch/" style="font-size: 14px; color: #00f">cm-sketch</a> <a href="/tags/cms/" style="font-size: 14px; color: #00f">cms</a> <a href="/tags/cubic/" style="font-size: 14px; color: #00f">cubic</a> <a href="/tags/disruptor/" style="font-size: 14px; color: #00f">disruptor</a> <a href="/tags/doorkeeper/" style="font-size: 14px; color: #00f">doorkeeper</a> <a href="/tags/elasticsearch/" style="font-size: 14px; color: #00f">elasticsearch</a> <a href="/tags/es/" style="font-size: 14px; color: #00f">es</a> <a href="/tags/flask/" style="font-size: 14px; color: #00f">flask</a> <a href="/tags/gc/" style="font-size: 14.85px; color: #120afe">gc</a> <a href="/tags/git/" style="font-size: 14.85px; color: #120afe">git</a> <a href="/tags/gpo/" style="font-size: 14px; color: #00f">gpo</a> <a href="/tags/gradle/" style="font-size: 14.85px; color: #120afe">gradle</a> <a href="/tags/groovy/" style="font-size: 14.85px; color: #120afe">groovy</a> <a href="/tags/gso/" style="font-size: 14px; color: #00f">gso</a> <a href="/tags/h264/" style="font-size: 14px; color: #00f">h264</a> <a href="/tags/hadoop/" style="font-size: 16.54px; color: #371efb">hadoop</a> <a href="/tags/hbase/" style="font-size: 14px; color: #00f">hbase</a> <a href="/tags/hdfs/" style="font-size: 14.85px; color: #120afe">hdfs</a> <a href="/tags/hive/" style="font-size: 19.08px; color: #6e3cf7">hive</a> <a href="/tags/hll/" style="font-size: 14px; color: #00f">hll</a> <a href="/tags/http/" style="font-size: 18.23px; color: #5c32f8">http</a> <a href="/tags/http3/" style="font-size: 14px; color: #00f">http3</a> <a href="/tags/https/" style="font-size: 14px; color: #00f">https</a> <a href="/tags/hyperloglog/" style="font-size: 14px; color: #00f">hyperloglog</a> <a href="/tags/io/" style="font-size: 14px; color: #00f">io</a> <a href="/tags/java/" style="font-size: 25px; color: #ee82ee">java</a> <a href="/tags/jvm/" style="font-size: 20.77px; color: #9250f5">jvm</a> <a href="/tags/kafka/" style="font-size: 15.69px; color: #2514fc">kafka</a> <a href="/tags/keepalive/" style="font-size: 14px; color: #00f">keepalive</a> <a href="/tags/kylin/" style="font-size: 14px; color: #00f">kylin</a> <a href="/tags/lfu/" style="font-size: 14px; color: #00f">lfu</a> <a href="/tags/log4j2/" style="font-size: 14px; color: #00f">log4j2</a> <a href="/tags/lru/" style="font-size: 14px; color: #00f">lru</a> <a href="/tags/maven/" style="font-size: 14px; color: #00f">maven</a> <a href="/tags/metaspace/" style="font-size: 14px; color: #00f">metaspace</a> <a href="/tags/monad/" style="font-size: 14px; color: #00f">monad</a> <a href="/tags/mp4/" style="font-size: 14px; color: #00f">mp4</a> <a href="/tags/mybatis/" style="font-size: 14.85px; color: #120afe">mybatis</a> <a href="/tags/mysql/" style="font-size: 24.15px; color: #dc78ef">mysql</a> <a href="/tags/nginx/" style="font-size: 17.38px; color: #4928fa">nginx</a> <a href="/tags/paxos/" style="font-size: 14px; color: #00f">paxos</a> <a href="/tags/pig/" style="font-size: 14px; color: #00f">pig</a> <a href="/tags/python/" style="font-size: 14px; color: #00f">python</a> <a href="/tags/quic/" style="font-size: 14.85px; color: #120afe">quic</a> <a href="/tags/rabbitmq/" style="font-size: 14px; color: #00f">rabbitmq</a> <a href="/tags/redis/" style="font-size: 22.46px; color: #b764f2">redis</a> <a href="/tags/restful/" style="font-size: 14px; color: #00f">restful</a> <a href="/tags/rtc/" style="font-size: 14px; color: #00f">rtc</a> <a href="/tags/rust/" style="font-size: 14.85px; color: #120afe">rust</a> <a href="/tags/scala/" style="font-size: 16.54px; color: #371efb">scala</a> <a href="/tags/shell/" style="font-size: 16.54px; color: #371efb">shell</a> <a href="/tags/spark/" style="font-size: 19.92px; color: #8046f6">spark</a> <a href="/tags/spring/" style="font-size: 19.08px; color: #6e3cf7">spring</a> <a href="/tags/springboot/" style="font-size: 14px; color: #00f">springboot</a> <a href="/tags/springmvc/" style="font-size: 14px; color: #00f">springmvc</a> <a href="/tags/sql%E6%B3%A8%E5%85%A5/" style="font-size: 14px; color: #00f">sql注入</a> <a href="/tags/sqoop/" style="font-size: 14.85px; color: #120afe">sqoop</a> <a href="/tags/ss/" style="font-size: 14px; color: #00f">ss</a> <a href="/tags/ssl/" style="font-size: 14px; color: #00f">ssl</a> <a href="/tags/storage/" style="font-size: 14px; color: #00f">storage</a> <a href="/tags/streaming/" style="font-size: 14px; color: #00f">streaming</a> <a href="/tags/tcp/" style="font-size: 17.38px; color: #4928fa">tcp</a> <a href="/tags/tinylfu/" style="font-size: 14px; color: #00f">tinylfu</a> <a href="/tags/udp/" style="font-size: 14px; color: #00f">udp</a> <a href="/tags/utf8/" style="font-size: 14px; color: #00f">utf8</a> <a href="/tags/voip/" style="font-size: 14px; color: #00f">voip</a> <a href="/tags/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C/" style="font-size: 14px; color: #00f">一致性哈希</a> <a href="/tags/%E4%B8%AD%E6%96%AD/" style="font-size: 14px; color: #00f">中断</a> <a href="/tags/%E5%86%85%E6%A0%B8%E6%80%81/" style="font-size: 14px; color: #00f">内核态</a> <a href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F/" style="font-size: 14px; color: #00f">函数式</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 14.85px; color: #120afe">分布式</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" style="font-size: 14px; color: #00f">分布式事务</a> <a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 14px; color: #00f">安全</a> <a href="/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" style="font-size: 14px; color: #00f">定时任务</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 20.77px; color: #9250f5">并发</a> <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 14px; color: #00f">性能优化</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" style="font-size: 14px; color: #00f">数据结构与算法</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 14.85px; color: #120afe">日志</a> <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 14.85px; color: #120afe">消息队列</a> <a href="/tags/%E7%82%B9%E6%92%AD/" style="font-size: 14px; color: #00f">点播</a> <a href="/tags/%E7%9B%B4%E6%92%AD/" style="font-size: 14px; color: #00f">直播</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 14.85px; color: #120afe">算法</a> <a href="/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/" style="font-size: 14px; color: #00f">红黑树</a> <a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 14px; color: #00f">线程</a> <a href="/tags/%E7%BC%96%E7%A0%81/" style="font-size: 14px; color: #00f">编码</a> <a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 14.85px; color: #120afe">论文</a> <a href="/tags/%E8%AE%BE%E8%AE%A1/" style="font-size: 14.85px; color: #120afe">设计</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 16.54px; color: #371efb">设计模式</a> <a href="/tags/%E9%85%8D%E7%BD%AE/" style="font-size: 23.31px; color: #c96ef1">配置</a> <a href="/tags/%E9%95%BF%E8%BF%9E%E6%8E%A5/" style="font-size: 14px; color: #00f">长连接</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/" style="font-size: 14px; color: #00f">项目管理</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/05/31/2022-05/w-tinylfu%E7%BC%93%E5%AD%98%E7%AE%97%E6%B3%95/">w-tinylfu缓存算法</a>
          </li>
        
          <li>
            <a href="/2022/03/25/2022-03/G1%E8%B0%83%E4%BC%98-%E5%A4%8D%E6%9D%82%E4%B8%9A%E5%8A%A1%E6%B2%BB%E7%90%86%E5%B0%8F%E8%AE%B0/">G1调优-复杂业务治理小记</a>
          </li>
        
          <li>
            <a href="/2022/03/16/2022-03/cms%E7%9A%84gc%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6/">cms的gc触发条件</a>
          </li>
        
          <li>
            <a href="/2022/03/14/2022-03/%E4%B8%AD%E6%96%AD%E6%A2%B3%E7%90%86/">java方法是否可中断梳理</a>
          </li>
        
          <li>
            <a href="/2022/03/13/2022-03/mp4%E6%A0%BC%E5%BC%8F/">mp4格式</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title archive">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">十一月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2022 风梦七&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;296671657@qq.com
    </div>
  </div>
</footer>
 
<script src="/jquery/jquery.min.js"></script>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 
<script src="/js/is.js"></script>



  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<script src="/js/elevator.js"></script>

  </div>
</body>
</html>